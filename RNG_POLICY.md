# RNG POLICY (CONTRACT)

Этот документ задаёт правила генерации случайностей, сидирования и воспроизводимости.

## Цели
1) Честный RNG для продакшна.
2) Полная воспроизводимость для тестов и симуляций.
3) Аудит: любой симуляционный отчёт можно повторить 1-в-1.

## Требования (MUST)

### 1) Разделение режимов
- **Production RNG**: криптографически корректный источник случайностей (платформенный/системный), без фиксированного seed.
- **Test/Simulation RNG**: детерминированный RNG, полностью управляемый seed.

### 2) Seed и конфигурация
- Seed для тестов/симуляций MUST передаваться явно (через CLI/env/config), и MUST логироваться.
- В симуляциях MUST логироваться снапшот конфигурации (включая `MAX_WIN_X` и UX-флаги) и хеш конфигурации.

### 3) Источник истинны
- Если параметр RNG/seed не описан в этом файле и в `CONFIG.md`, агент MUST остановиться и зафиксировать вопрос.

## Simulation Reproducibility (CONTRACT)
Любая симуляция/лонгран должна быть воспроизводимой:
- логировать: `seed`, `config_hash`, версию билда (если есть), дату/время запуска
- сохранять: краткий конфиг-снапшот и итоговые метрики

## Acceptance Criteria (MUST)
1) Два запуска симуляции с одинаковыми `seed` и `config_hash` дают идентичные агрегаты (в пределах машинной точности) и идентичные распределения при фиксированном генераторе.
2) Симуляционный отчёт содержит: seed, config_hash, версию (если есть) и итоговые частоты.
